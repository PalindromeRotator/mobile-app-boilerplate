All functionalities behid widgets are here